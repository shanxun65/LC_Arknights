# Cjw 2025 Work Summary

## 📋 文档修订记录

| 版本  | 修订日期|        修订内容概要                                 | 修订人  |
|------|---------|----------------------------------------------------|
| V1.0 | 2025/11 | 初初始版本，涵盖底盘运动学、DR16驱动移植及调试系统搭建 |  cjw    |
| V1.1 | 2026/01 | 新增OPS-9定位系统适配进度与Orin通信协议方案           |  cjw    |
|      |         |                                                    |         |
## 🗓️ 项目时间线
| 时间节点         | 阶段      |           关键成果/事件                   | 状态    |
| --------------- | --------- | ---------------------------------------- | ------- |
| 2025/11-12      | 架构迁移   |       复刻去年代码，完成底盘框架搭建       |  ✅    |
| 2025/12-01      | 遥控器适配 | DR16 DBUS协议解析完成，上线失控保护逻辑     |  ✅    |
| 2026/02 (计划)  | 传感器融合 | 推进定位模块移植与Orin 上位机 CAN 通信      | 🚧计划中|
## 📈 最新项目进展
- 交互逻辑闭环：实现了 DR16 遥控器数据到 Chassis 底盘速度的完整映射
- 通信协议升级：针对上位机 (Orin) 通信，制定了相关的通信方案

## 🎯 项目前景
构建一套高鲁棒性、模块化的排球底盘控制系统，目标是实现底盘的高速稳定全向移动与精确定位

## ⚙️ 技术原理（摘要）
1. 遥控器数据接收与解析 (DR16)
通信协议：利用 USART1 的 DMA 循环接收 模式处理 DBUS 协议 (100kbps, 18字节/帧)。
数据解包：通过位运算将原始字节流解析为摇杆 (Channel 0-3)、拨杆 (S1, S2) 及键鼠数据。
失控保护：利用 TIM 定时器监控接收中断标志位 Flag，若 100ms 内无新数据则强制切断底盘输出，防止失控。

2. 全向底盘运动学控制
坐标系定义：采用机器人坐标系，X轴为右，Y轴为前。
逆运动学解算：针对 X 型全向轮布局，将目标速度 Vx,Vy,w 分解为四个轮子的线速度。
公式摘要：V wheel = Vx * cos(theta) + Vy * sin(theta) + w * R
在代码中体现为根据 Wheel_Azimuth (安装角) 计算各轮目标转速。
闭环控制：采用 PID 算法（速度环 + 角度环）对 M3508 电机进行精准调速。

3. 多层级软件架构分层设计：
drv_ (Driver): 硬件抽象层 (UART, CAN, GPIO)。
dvc_ (Device): 设备驱动层 (DR16, Motor, OPS9)。
crt_ (Controller): 控制算法层 (Chassis, Shot)。
ita_ (Interaction): 交互逻辑层 (Robot Task Loop)。


## 📅 下阶段计划
- OPS-9 移植 ：实现 DMA 空闲中断接收与坐标数据解析

- Orin 联调 ：测试基于 CAN 总线的压缩数据传输，验证上位机速度指令的响应延迟

- PID 调优：针对底盘的新重量分布，重新整定底盘速度环